# Mami Supermarket â€” Frontend

A modern, full-featured supermarket e-commerce platform built with React 19, Vite, and Tailwind CSS. This frontend application provides a complete shopping experience for customers, staff operations tools, and comprehensive admin management capabilities.

---

## ğŸ“‹ Project Overview

Mami Supermarket is a multi-role platform that handles:

- **Customer Shopping:** Browse products, search, manage cart, checkout with delivery/pickup options
- **Order Management:** Track orders, view history, manage delivery addresses
- **Staff Operations:** Order picking, inventory management, stock requests
- **Admin & Manager Tools:** Product catalog, inventory control, branch management, analytics
- **Logistics & Marketing:** Delivery slots, promotions, loyalty programs, supplier management

**Current Status:** Customer storefront (catalog/search/product), auth/profile, cart, checkout, orders, and ops dashboards are built; admin is limited to stock-requests for now. Analytics, full admin catalog/branches, and marketing/support suites remain pending.

**Status Snapshot:**

- Customer journey: browsing â†’ cart â†’ checkout â†’ order history live
- Profile: account dashboard, settings, addresses, security live
- Ops: orders board, order details, staff performance, stock requests live
- Admin: stock-requests review only (catalog/inventory/analytics not yet)
- Testing: Vitest + React Testing Library configured; coverage focused on cart, ops, admin screens; manual QA checklist still required

---

## ğŸ›  Tech Stack

### Frontend

- **React 19** â€” UI library
- **Vite** â€” Build tool and dev server
- **React Router** â€” Client-side routing with role-based guards
- **Tailwind CSS** â€” Utility-first styling
- **Axios** â€” HTTP client with interceptors
- **React Hook Form + Zod** â€” Form management and validation
- **react-hot-toast** â€” Toast notifications
- **Radix UI Select** â€” Accessible dropdown components
- **Vitest + React Testing Library** â€” Unit/component tests

### Backend (external API expectations)

- REST API with `/api/v1` base (configurable via `VITE_API_BASE_URL`)
- JWT auth; endpoints defined in `src/api/endpoints.js`
- Success envelope `{ data: ... }`, error envelope `{ error: { code, message, details } }`

---

## ğŸš€ Getting Started

### Prerequisites

- Node.js 18+ and npm
- Backend API running (see backend repo)

### Installation

```bash
# Clone the repository
git clone <repo-url>
cd mami-supermarket-frontend

# Install dependencies
npm install
```

### Development

```bash
# Start dev server (default: http://localhost:5173)
npm run dev
```

**Environment Variables:**
Create `.env` or `.env.local` (defaults to `/api/v1` if unset):

```
VITE_API_BASE_URL=http://localhost:3000/api/v1
```

### Production Build

```bash
# Build for production
npm run build

# Preview production build locally
npm run preview
```

### Linting

```bash
npm run lint
```

---

## ğŸ— Architecture

### High-Level Structure

```
Frontend (React SPA)
  â†•
Backend REST API (Node.js/Express)
  â†•
Database (PostgreSQL) + Cache (Redis)
```

### Key Architectural Layers

1. **Routing & Guards** (`src/app/router.jsx`)
   - Role-based route protection (Customer, Staff, Manager, Admin)
   - Layout groups (AuthLayout, MainLayout)

2. **API Layer** (`src/api/`)
   - Centralized HTTP client (`http.js`)
   - Domain-specific API modules (`*.api.js`)
   - Error normalization into `AppError` shape

3. **Features** (`src/features/`)
   - Domain-driven folders: `auth/`, `catalog/`, `cart/`, `checkout/`, `orders/`, `ops/`, `admin/`
   - Each feature contains: `pages/`, `components/`, `hooks/`, `services/`, `validators/`

4. **Global State Providers** (`src/app/providers/`)
   - `AuthProvider` â€” User session, token, role
   - `CartProvider` â€” Cart state and guest cart merge logic

5. **Shared Components** (`src/components/`)
   - Reusable UI: inputs, buttons, loading/empty/error states, pagination

6. **Utilities & Types** (`src/utils/`, `src/types/`)
   - Debounce, error messages, pagination helpers
   - Shared TypeScript-like types (JS-friendly)

---

## ğŸ“± Feature Scope (38 Screens)

### 1) Customer Storefront (Shopping Journey)

- **Storefront Home & Groceries** â€” Landing page with featured products
- **Category Product Listing** â€” Browse products by category
- **Product Details View** â€” Detailed product info, add to cart
- **Supermarket Search Results** â€” Search with autocomplete
- **Supermarket Cart Overview** â€” View/edit cart items
- **Checkout - Fulfillment Selection** â€” Choose delivery or pickup
- **Checkout Order Preview** â€” Review order, apply coupons, see totals
- **Checkout - Payment Method** â€” Select payment (credit card, cash, etc.)
- **Order Success Confirmation** â€” Post-order confirmation page

### 2) Customer Account & Authentication

- **Customer Login Screen** â€” Email/password login
- **Customer Registration Screen** â€” New account signup
- **Account Dashboard Hub** â€” Customer profile overview
- **My Order History** â€” Paginated list of past orders
- **Order Details View** â€” Single order detail + cancel option
- **My Profile Settings** â€” Edit name, email, phone
- **Manage Delivery Addresses** â€” Add/edit/delete delivery addresses

### 3) Operations & Staff (Fulfillment & Inventory)

- **Operations - Orders Dashboard** â€” Staff view of all orders (filters, sorting)
- **Grocery Order Picking List** â€” Item-by-item picking interface
- **New Stock Request Form** â€” Request inventory replenishment
- **My Stock Requests History** â€” Track submitted stock requests
- **Staff Performance Dashboard** â€” KPIs, picking speed, accuracy
- **Warehouse Aisle Mapping** â€” Visual warehouse layout (if applicable)

### 4) Admin Management (Catalog & Business)

- **Manager Analytics Dashboard** â€” Sales, revenue, trends
- **Product Catalog Management** â€” CRUD for products
- **Add New Product Form** â€” Create new product entries
- **Category Management Dashboard** â€” Manage product categories
- **Bulk Inventory Upload** â€” CSV/Excel import for stock updates
- **Admin Inventory Control** â€” View/edit inventory levels
- **Stock Request Management** â€” Approve/reject staff stock requests

### 5) Logistics, Marketing & Support

- **Supermarket Branch Management** â€” Manage store locations
- **Branch Configuration Details** â€” Hours, contact, address
- **Delivery Slot Scheduling** â€” Configure available delivery windows
- **Delivery Route Planning** â€” Optimize delivery routes (if applicable)
- **Promotions & Coupons Manager** â€” Create/edit discount campaigns
- **Loyalty Program Settings** â€” Configure rewards program
- **Supplier Directory Management** â€” Manage supplier contacts
- **Customer Feedback & Reviews** â€” View/moderate product reviews
- **Support Ticket Dashboard** â€” Customer support ticket system
- **Help Center Management** â€” FAQ and help articles
- **Global System Settings** â€” App-wide configuration (taxes, fees, etc.)

### 6) Shared Utility & Errors

- **Page Not Found - 404** â€” Fallback for invalid routes

---

## ğŸ‘¥ Roles & Permissions

| Role         | Access                                                               |
| ------------ | -------------------------------------------------------------------- |
| **Guest**    | Browse catalog, search, view products (no cart/checkout until login) |
| **Customer** | Full shopping experience, cart, checkout, order history, profile     |
| **Staff**    | Operations dashboard, order picking, stock requests                  |
| **Manager**  | Analytics, product/category management, inventory control, approvals |
| **Admin**    | All manager features + global settings, branch config, users         |

**Role Guards:**

- Customer routes: `/cart`, `/checkout`, `/orders`, `/profile/*`
- Staff routes: `/ops/*`
- Manager/Admin routes: `/admin/*`

Unauthenticated users are redirected to `/auth/login`.  
Unauthorized role access redirects to `/` (or `/403` if implemented).

---

## ğŸŒ API & Environments

### API Base URL

Set via `VITE_API_BASE_URL` (fallback `/api/v1`).

**Development example:**

```
http://localhost:3000/api/v1
```

**Production example:**

```
https://api.mami-supermarket.com/api/v1
```

### API Response Envelope

**Success:**

```json
{
  "data": { ... }
}
```

**Error:**

```json
{
  "error": {
    "code": "INSUFFICIENT_STOCK",
    "message": "Some items are out of stock",
    "details": { ... }
  }
}
```

All API calls are normalized into `AppError` shape in the frontend.

---

## ğŸ§ª Testing

### Unit Tests

**Framework:** Vitest + React Testing Library

```
# Run unit/component tests
npm run test

# Run with coverage
npm run test:coverage
```

**Current Status:** Test harness is configured with coverage for cart, ops, admin, and profile flows; broader journey/e2e coverage still pending. Manual QA checklist (see `AGENTS.md`) remains required before release.

**Manual QA Checklist (Minimum):**

- Guest cart â†’ localStorage
- Login merges guest cart
- Catalog search/autocomplete
- Cart CRUD operations
- Checkout preview updates
- Checkout confirm: double-submit prevention, error handling
- Staff operations: picking, status transitions

---

## ğŸ“‚ Project Structure

```
src/
â”œâ”€â”€ api/                    # Centralized HTTP layer
â”‚   â”œâ”€â”€ http.js             # Axios instance + interceptors
â”‚   â”œâ”€â”€ endpoints.js        # API path constants
â”‚   â””â”€â”€ *.api.js            # Domain API modules
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ router.jsx          # React Router configuration
â”‚   â”œâ”€â”€ guards/             # ProtectedRoute (role-based)
â”‚   â”œâ”€â”€ layouts/            # AuthLayout, MainLayout
â”‚   â””â”€â”€ providers/          # AuthProvider, CartProvider
â”œâ”€â”€ features/               # Feature-driven folders
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ catalog/
â”‚   â”œâ”€â”€ cart/
â”‚   â”œâ”€â”€ checkout/
â”‚   â”œâ”€â”€ orders/
â”‚   â”œâ”€â”€ ops/                # Staff operations
â”‚   â””â”€â”€ admin/              # Manager/Admin features
â”œâ”€â”€ components/             # Shared UI components
â”œâ”€â”€ utils/                  # Shared helpers (debounce, pagination)
â”œâ”€â”€ types/                  # Shared types (errors.js)
â””â”€â”€ styles/                 # Global CSS (globals.css)
```

**File Size Limit:** All non-markdown files must be â‰¤150 lines (enforced).

---

## ğŸ¤ Contribution & Workflow

**Format (append-only):**

1. Goal
2. Files touched
3. Changes made
4. Commands/tests run
5. Result/next step

### Code Quality Gates

A feature is **DONE** only if:

- Uses centralized API layer (no raw axios in UI)
- Forms use React Hook Form + Zod
- Loading/empty/error states exist
- Error codes are mapped to user messages
- Role-based guards protect routes
- Checkout changes trigger preview revalidation
- Code passes `npm run lint`
- Build succeeds (`npm run build`)

### Branching (ASSUMPTION)

- `main` â€” Production-ready code
- `develop` â€” Active development branch
- Feature branches: `feature/<feature-name>`
- Hotfixes: `hotfix/<issue>`

---

## ğŸ“„ Documentation

- **AGENTS.md** â€” Agent responsibilities, rules, quality gates
- **TODO.md** â€” Phased task roadmap

---

## ğŸ“ Contact & Support

**Project Maintainer:** [Your Name/Team]  
**Issue Tracker:** [GitHub Issues URL]  
**Slack/Discord:** [Team Chat Link]

---

## ğŸ“œ License

[MIT / Proprietary / Other] â€” (Update as needed)

---

**Last Updated:** January 21, 2026